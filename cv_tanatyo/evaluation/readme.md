# 精度評価を行うプログラムの説明

## Requirements

- Python3

## Usage

### 0. 環境構築

上記[Requirements](#requirements)を満たす環境を用意する.

### 1. 正解ファイルの作成

配布した学習データなどから正解ファイルを作成する. フォーマットは以下のjson形式とする.

```bash
{
    画像1:
    [
        "000"
    ],

    画像2:
    [
        "001"
    ],

    ...

}
```

正解ファイルは画像データに対して, 写っている部材の型番を文字列形式で表現したものである.

- keyはサンプル名である.
- 対応する部材の型番を長さ1のlistとして記述する(部材に対応する型番は必ず1つである).
- encodingは"utf-8"を想定している.
- 同封してある"./data/ans.json"も参照すること.

### 2. 予測ファイルの作成

正解ファイルと同じフォーマットの予測ファイルを作成する. なお, keyは正解ファイルと対応する必要があることに注意する. 各サンプルに対する予測結果は, 確信度が高い順に並んだ異なる型番のlistとする. また, 各サンプルに対して提案できる型番は最大で**10件**とする. つまり, サンプルに対する予測結果となるlistは長さ10を超えてはならない. 同封してある"./data/sub.json"も参照すること.

### 3. 作業ディレクトリの移動

evaluate.pyが存在するディレクトリと同じディレクトリに移動する.

```bash
$ cd /path/to/evaluation
```

### 4. 精度評価を行う

以下のコマンドを実行して作成した予測ファイルに対する精度評価を確認する.

```bash
$ python evaluate.py --ground-truth-path /path/to/ans.json --predictions-path /path/to/sub.json
```

成功すると各サンプルに対するAverage Precisionと最終スコア(MAP@10)が表示される.

- 引数"--ground-truth-path"には作成した正解ファイルのパスを記述する.
- 引数"--predictions-path"には作成した予測ファイルのパスを記述する.
- 評価方法の詳細については[こちら](https://signate.jp/competitions/720#evaluation)を参照すること.